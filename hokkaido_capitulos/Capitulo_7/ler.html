<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#181818">
    <link rel="stylesheet" href="/header_vol.css">
    <link rel="stylesheet" href="/hokkaido_capitulos/cap.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="/retornar_pagina.js"></script>
    <title>AniHotel+</title>
    <style>
        body {
            background: #181818;
        }
        
        nav {
            text-align: center;
            margin-top: 20px;
        }
        
        nav .navigation-icons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 10px;
        }
        
        nav .navigation-icons a {
            color: white;
            font-size: 24px;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="logo">    
                <i class="fas fa-book-open logo-icon"></i>
                <h1>AniHotel+</h1>
            </div>
            <nav>
                <ul>
                    <li>
                        <a href="/index.html">
                            <i class="fas fa-home"></i>
                            <span class="nav-text">Início</span>
                        </a>
                    </li>
                    <li>
                        <a href="/catalogo/catalogo.html">
                            <i class="fas fa-bars"></i>
                            <span class="nav-text">Catálogo</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </header>
    <nav>
        <img id="logo" src="/img/hokkaido-logo.png" alt="Logo"/>
        <div class="navigation-icons">
            <a href="/hokkaido_capitulos/Capitulo_6/ler.html" id="previous-chapter"><i class="fas fa-backward"></i></a>
            <a href="/hokkaido/selecionar.html" id="select-volume"><i class="fas fa-bars"></i></a>
            <a href="/hokkaido_capitulos/Capitulo_8/ler.html" id="next-chapter"><i class="fas fa-forward"></i></a>
        </div>
    </nav>
    <section>
        <div class="capitulo">
            
        </div>        
    </section>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
    // Localize o elemento div.capitulo
    var capituloDiv = document.querySelector('.capitulo');

// Verifique se o elemento foi encontrado
if (capituloDiv) {
    // Caminho do diretório atual
    var diretorioAtual = window.location.pathname.substring(0, window.location.pathname.lastIndexOf("/"));
    
    // Faz uma solicitação HTTP para o diretório atual
    fetch(diretorioAtual)
        .then(response => response.text())
        .then(html => {
            // Crie um novo parser de HTML
            var parser = new DOMParser();
            var doc = parser.parseFromString(html, "text/html");
            // Selecione todos os elementos <a> (links) no documento
            var links = doc.querySelectorAll("a");
            // Filtrar apenas os links que apontam para arquivos
            var arquivos = Array.from(links)
                .filter(link => link.href.lastIndexOf("/") !== link.href.length - 1) // Ignora diretórios
                .map(link => link.href);
            
            // Filtrar apenas os arquivos de imagem (jpg, png, etc)
            var imagens = arquivos.filter(arquivo => {
                var extensao = arquivo.substring(arquivo.lastIndexOf(".") + 1).toLowerCase();
                return ['jpg', 'jpeg', 'png', 'gif', 'bmp', 'svg'].includes(extensao);
            });

            // Ordenar as imagens
            imagens.sort(function(a, b) {
                var nomeA = extrairNumeroDoNomeArquivo(a);
                var nomeB = extrairNumeroDoNomeArquivo(b);
                return nomeA - nomeB;
            });

            // Iterar sobre as imagens ordenadas
            imagens.forEach(function(nomeImagem) {
                // Crie um novo elemento img
                var novaImg = document.createElement('img');
                // Defina o atributo src para o caminho da imagem
                novaImg.src = nomeImagem;
                // Adicione a nova imagem ao elemento div.capitulo
                capituloDiv.appendChild(novaImg);
            });
        })
        .catch(error => {
            console.error("Erro ao buscar imagens:", error);
        });
} else {
    console.error("Div '.capitulo' não encontrada.");
}

// Função para extrair o número do nome do arquivo
function extrairNumeroDoNomeArquivo(nomeArquivo) {
    var nome = nomeArquivo.substring(nomeArquivo.lastIndexOf("/") + 1);
    var numero = nome.match(/\d+/); // Encontra o primeiro número no nome do arquivo
    return parseInt(numero);
}
        });
    </script>

<script src="/clonar_link.js"></script>
<script>

// Função para obter o número do capítulo da URL atual
function obterNumeroCapituloAtual() {
    // Obter o pathname da URL atual
    var pathname = window.location.pathname;
    // Encontrar o índice do texto "Capitulo_" na URL
    var index = pathname.indexOf("Capitulo_");
    if (index !== -1) {
        // Obter o número do capítulo a partir do nome da pasta na URL
        var numeroCapitulo = parseInt(pathname.substring(index + 9)); // Adiciona 9 para pular o "Capitulo_"
        return numeroCapitulo;
    } else {
        // Se "Capitulo_" não for encontrado na URL, retorne null
        return null;
    }
}

// Atualizar o "Continue Lendo" com o número do capítulo atual
var numeroCapituloAtual = obterNumeroCapituloAtual();
if (numeroCapituloAtual !== null) {
    atualizarContinueLendo("/hokkaido/capas/volume_1.png", "Hokkaido Gals", numeroCapituloAtual);
} else {
    console.error("Número do capítulo atual não encontrado na URL.");
}

   // Função para definir e atualizar o conteúdo do "Continue Lendo"
function atualizarContinueLendo(capa, nomeManga, capitulo) {
    var continuarLendo = {
        capa: capa,
        nomeManga: nomeManga,
        capitulo: capitulo
    };

    // Salvar o estado do capítulo no localStorage
    localStorage.setItem('continueLendo', JSON.stringify(continuarLendo));

    // Verificar se o elemento .continuar-lendo existe na página
    var continuarLendoDiv = document.querySelector('.continuar-lendo');
    if (continuarLendoDiv) {
        // Atualizar a exibição do "Continue Lendo" apenas se o elemento existir
        continuarLendoDiv.querySelector('.capa-miniatura').innerHTML = '<img src="' + capa + '" alt="Capa">';
        continuarLendoDiv.querySelector('.nome-manga').textContent = nomeManga;
        continuarLendoDiv.querySelector('.capitulo_manga').textContent = "Capítulo " + capitulo;
    } else {
        console.log("Foda");
    }
}
</script>

    <script src="/favicons.js"></script> 
    <script src="/caso_icones.js"></script>
</body>
</html>