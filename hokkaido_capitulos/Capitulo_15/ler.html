<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#181818">
    <link rel="stylesheet" href="/header_vol.css">
    <link rel="stylesheet" href="/hokkaido_capitulos/cap.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="/retornar_pagina.js"></script>
    <title>AniHotel+</title>
    <style>
        body {
            background: #181818;
        }
        
        nav {
            text-align: center;
            margin-top: 20px;
        }
        
        nav .navigation-icons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 10px;
        }
        
        nav .navigation-icons a {
            color: white;
            font-size: 24px;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="logo">    
                <i class="fas fa-book-open logo-icon"></i>
                <h1>AniHotel+</h1>
            </div>
            <nav>
                <ul>
                    <li>
                        <a href="/index.html">
                            <i class="fas fa-home"></i>
                            <span class="nav-text">Início</span>
                        </a>
                    </li>
                    <li>
                        <a href="/catalogo/catalogo.html">
                            <i class="fas fa-bars"></i>
                            <span class="nav-text">Catálogo</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </header>
    <nav>
        <img id="logo" src="/img/hokkaido-logo.png" alt="Logo"/>
        <div class="navigation-icons">
            <a href="" id="previous-chapter"><i class="fas fa-backward"></i></a>
            <a href="/hokkaido/selecionar.html" id="select-volume"><i class="fas fa-bars"></i></a>
            <a href="" id="next-chapter"><i class="fas fa-forward"></i></a>
        </div>
    </nav>
    <section>
        <div class="capitulo">
            
        </div>        
    </section>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
    // Localize o elemento div.capitulo
    var capituloDiv = document.querySelector('.capitulo');

    // Verifique se o elemento foi encontrado
    if (capituloDiv) {
        // Obtenha o nome da pasta atual
        var nomePastaAtual = obterNomePastaAtual();

        // Se o nome da pasta atual for válido, continue
        if (nomePastaAtual) {
            // Crie um loop para adicionar imagens de 01.jpg a 21.jpg
            for (var i = 1; i <= 17; i++) {
                // Formate o número da página com zero à esquerda se necessário
                var pagina = i < 10 ? "0" + i : i;

                // Crie um novo elemento img
                var novaImg = document.createElement('img');

                // Defina o atributo src para o caminho da imagem com base no nome da pasta atual
                novaImg.src = "/hokkaido_capitulos/" + nomePastaAtual + "/" + pagina + ".jpg";

                // Adicione a nova imagem ao elemento div.capitulo
                capituloDiv.appendChild(novaImg);
            }
        } else {
            console.error("Nome da pasta atual não encontrado.");
        }
    } else {
        console.error("Div '.capitulo' não encontrada.");
    }
});

// Função para obter o nome da pasta atual
function obterNomePastaAtual() {
    var url = window.location.href;
    var partesUrl = url.split('/');
    var indexCapitulo = partesUrl.indexOf("hokkaido_capitulos");
    if (indexCapitulo !== -1 && indexCapitulo < partesUrl.length - 1) {
        return partesUrl[indexCapitulo + 1]; // O nome da pasta atual é o próximo elemento após "hokkaido_capitulos"
    } else {
        console.error("Nome da pasta atual não encontrado na URL.");
        return null;
    }
}
    </script>
<script>
  // Função para obter o número do capítulo atual da URL
function obterNumeroCapituloAtual() {
    // Obter o pathname da URL atual
    var pathname = window.location.pathname;
    // Encontrar o índice do texto "Capitulo_" na URL
    var index = pathname.indexOf("Capitulo_");
    if (index !== -1) {
        // Obter o número do capítulo a partir do nome da pasta na URL
        var numeroCapitulo = parseInt(pathname.substring(index + 9)); // Adiciona 9 para pular o "Capitulo_"
        return numeroCapitulo;
    } else {
        // Se "Capitulo_" não for encontrado na URL, retorne null
        return null;
    }
}

// Atualizar o "Continue Lendo" com o número do capítulo atual
var numeroCapituloAtual = obterNumeroCapituloAtual();
if (numeroCapituloAtual !== null) {
    atualizarContinueLendo("/hokkaido/capas/volume_2.png", "Hokkaido Gals", numeroCapituloAtual);
} else {
    console.error("Número do capítulo atual não encontrado na URL.");
}

// Função para definir e atualizar o conteúdo do "Continue Lendo"
function atualizarContinueLendo(capa, nomeManga, capitulo) {
    var continuarLendo = {
        capa: capa,
        nomeManga: nomeManga,
        capitulo: capitulo
    };

    // Salvar o estado do capítulo no localStorage
    localStorage.setItem('continueLendo', JSON.stringify(continuarLendo));

    // Verificar se o elemento .continuar-lendo existe na página
    var continuarLendoDiv = document.querySelector('.continuar-lendo');
    if (continuarLendoDiv) {
        // Atualizar a exibição do "Continue Lendo" apenas se o elemento existir
        continuarLendoDiv.querySelector('.capa-miniatura').innerHTML = '<img src="' + capa + '" alt="Capa">';
        continuarLendoDiv.querySelector('.nome-manga').textContent = nomeManga;
        continuarLendoDiv.querySelector('.capitulo_manga').textContent = "Capítulo " + capitulo;
    } else {
        // Se o elemento não existir, criar um novo e adicioná-lo à página
        criarContinueLendo(capa, nomeManga, capitulo);
    }
}

// Função para criar o elemento "Continue Lendo" e adicioná-lo à página
function criarContinueLendo(capa, nomeManga, capitulo) {
    var continuarLendoDiv = document.createElement('div');
    continuarLendoDiv.classList.add('continuar-lendo');

    var capaMiniatura = document.createElement('div');
    capaMiniatura.classList.add('capa-miniatura');
    capaMiniatura.innerHTML = '<img src="' + capa + '" alt="Capa">';

    var nomeMangaSpan = document.createElement('span');
    nomeMangaSpan.classList.add('nome-manga');
    nomeMangaSpan.textContent = nomeManga;

    var capituloMangaSpan = document.createElement('span');
    capituloMangaSpan.classList.add('capitulo_manga');
    capituloMangaSpan.textContent = "Capítulo " + capitulo;

    continuarLendoDiv.appendChild(capaMiniatura);
    continuarLendoDiv.appendChild(nomeMangaSpan);
    continuarLendoDiv.appendChild(capituloMangaSpan);

    // Adicionar o elemento "Continue Lendo" antes do rodapé da página
    var footerElement = document.querySelector('footer');
    if (footerElement) {
        footerElement.parentNode.insertBefore(continuarLendoDiv, footerElement);
    } else {
        console.error("Elemento <footer> não encontrado para adicionar o 'Continue Lendo'.");
    }
}
</script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
    // Verifica se a navegação superior já existe no documento
    var topNavigationExists = document.querySelector('nav .navigation-icons');

    // Se a navegação superior não existir, adiciona manualmente
    if (!topNavigationExists) {
        adicionarTopNavigation();
    }

    // Verifica se a navegação inferior já existe no documento
    var bottomNavigationExists = document.querySelector('.bottom-navigation');

    // Se a navegação inferior não existir, adiciona manualmente abaixo da seção
    if (!bottomNavigationExists) {
        adicionarBottomNavigation();
    }

    // Atualiza a navegação original
    atualizarNavigationOriginal();
});

// Função para adicionar a navegação superior
function adicionarTopNavigation() {
    // Encontra o elemento nav
    var navElement = document.querySelector('nav');

    // Verifica se o elemento foi encontrado
    if (navElement) {
        // Cria a div de ícones de navegação
        var navigationIconsDiv = document.createElement('div');
        navigationIconsDiv.classList.add('navigation-icons');

        // Cria os links de navegação para o capítulo anterior e próximo
        var linkCapituloAnterior = document.createElement('a');
        var linkCapituloProximo = document.createElement('a');
        var linkSelecionarVolume = document.createElement('a');

        // Adiciona as classes aos links de navegação
        linkCapituloAnterior.id = 'previous-chapter';
        linkCapituloProximo.id = 'next-chapter';
        linkSelecionarVolume.id = 'select-volume';

        // Atualiza os hrefs dos links de navegação com os links dos capítulos
        linkCapituloAnterior.href = obterLinkCapituloAnterior();
        linkCapituloProximo.href = obterLinkCapituloProximo();
        linkSelecionarVolume.href = "/hokkaido/selecionar.html";

        // Adiciona os ícones de navegação aos links
        linkCapituloAnterior.innerHTML = '<i class="fas fa-backward"></i>';
        linkCapituloProximo.innerHTML = '<i class="fas fa-forward"></i>';
        linkSelecionarVolume.innerHTML = '<i class="fas fa-bars"></i>';

        // Adiciona os links de navegação à div de ícones de navegação
        navigationIconsDiv.appendChild(linkCapituloAnterior);
        navigationIconsDiv.appendChild(linkSelecionarVolume);
        navigationIconsDiv.appendChild(linkCapituloProximo);

        // Adiciona a div de ícones de navegação à navegação superior
        navElement.appendChild(navigationIconsDiv);
    } else {
        console.error('Elemento <nav> não encontrado no documento.');
    }
}

// Função para adicionar a navegação inferior
function adicionarBottomNavigation() {
    // Encontra a seção
    var section = document.querySelector('section');

    // Verifica se a seção foi encontrada
    if (section) {
        // Cria a navegação inferior
        var bottomNavigation = document.createElement('nav');
        bottomNavigation.classList.add('bottom-navigation');

        // Cria a div de ícones de navegação
        var navigationIconsDiv = document.createElement('div');
        navigationIconsDiv.classList.add('navigation-icons');
        navigationIconsDiv.id = 'nav_ico-baixo';

        // Cria os links de navegação para o capítulo anterior e próximo
        var linkCapituloAnterior = document.createElement('a');
        var linkCapituloProximo = document.createElement('a');
        var linkSelecionarVolume = document.createElement('a');

        // Adiciona as classes aos links de navegação
        linkCapituloAnterior.classList.add('nav-link');
        linkCapituloProximo.classList.add('nav-link');
        linkSelecionarVolume.classList.add('nav-link');

        // Atualiza os hrefs dos links de navegação com os links dos capítulos
        linkCapituloAnterior.href = obterLinkCapituloAnterior();
        linkCapituloProximo.href = obterLinkCapituloProximo();
        linkSelecionarVolume.href = "/hokkaido/selecionar.html";

        // Adiciona os ícones de navegação aos links
        linkCapituloAnterior.innerHTML = '<i class="fas fa-backward"></i>';
        linkCapituloProximo.innerHTML = '<i class="fas fa-forward"></i>';
        linkSelecionarVolume.innerHTML = '<i class="fas fa-bars"></i>';

        // Adiciona os links de navegação à div de ícones de navegação
        navigationIconsDiv.appendChild(linkCapituloAnterior);
        navigationIconsDiv.appendChild(linkSelecionarVolume);
        navigationIconsDiv.appendChild(linkCapituloProximo);

        // Adiciona a div de ícones de navegação à navegação inferior
        bottomNavigation.appendChild(navigationIconsDiv);

        // Insere a navegação inferior após a seção
        section.parentNode.insertBefore(bottomNavigation, section.nextSibling);
    } else {
        console.error('Seção não encontrada no documento.');
    }
}

// Função para atualizar a navegação original
function atualizarNavigationOriginal() {
    // Obter o número do capítulo atual da URL
    var numeroCapituloAtual = obterNumeroCapituloAtual();

    // Criar os links para o capítulo anterior e próximo
    var linkCapituloAnterior = obterLinkCapituloAnterior();
    var linkCapituloProximo = obterLinkCapituloProximo();

    // Atualizar os links de navegação no HTML
    if (linkCapituloAnterior && linkCapituloProximo) {
        document.getElementById("previous-chapter").href = linkCapituloAnterior;
        document.getElementById("next-chapter").href = linkCapituloProximo;
    }
}

// Função para obter o link do capítulo anterior
function obterLinkCapituloAnterior() {
    var numeroCapituloAtual = obterNumeroCapituloAtual();
    if (numeroCapituloAtual !== null && numeroCapituloAtual > 1) {
        var linkAnterior = "/hokkaido_capitulos/Capitulo_" + (numeroCapituloAtual - 1) + "/ler.html";
        // Verifica se o link existe
        return linkExiste(linkAnterior) ? linkAnterior : "/index.html";
    }
    return "/index.html";
}

// Função para obter o link do próximo capítulo
function obterLinkCapituloProximo() {
    var numeroCapituloAtual = obterNumeroCapituloAtual();
    if (numeroCapituloAtual !== null) {
        var linkProximo = "/hokkaido_capitulos/Capitulo_" + (numeroCapituloAtual + 1) + "/ler.html";
        // Verifica se o link existe
        return linkExiste(linkProximo) ? linkProximo : "/index.html";
    }
    return "/index.html";
}

// Função para obter o número do capítulo atual da URL
function obterNumeroCapituloAtual() {
    var url = window.location.href;
    var numeroCapitulo = url.match(/Capitulo_(\d+)/);
    if (numeroCapitulo && numeroCapitulo.length > 1) {
        return parseInt(numeroCapitulo[1]);
    } else {
        console.error('Número do capítulo não encontrado na URL.');
        return null;
    }
}

// Função para verificar se o link existe
async function linkExiste(link) {
    try {
        const response = await fetch(link, { method: 'HEAD' });
        return response.ok;
    } catch (error) {
        return false;
    }
}
</script>

    <script src="/favicons.js"></script> 
    <script src="/caso_icones.js"></script>
</body>
</html>