<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#181818">
    <link rel="stylesheet" href="/header_vol.css">
    <link rel="stylesheet" href="/hokkaido_capitulos/cap.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="/retornar_pagina.js"></script>
    <title>AniHotel+</title>
    <style>
        body {
            background: #181818;
        }
        
        nav {
            text-align: center;
            margin-top: 20px;
        }
        
        nav .navigation-icons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 10px;
        }
        
        nav .navigation-icons a {
            color: white;
            font-size: 24px;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="logo">    
                <i class="fas fa-book-open logo-icon"></i>
                <h1>AniHotel+</h1>
            </div>
            <nav>
                <ul>
                    <li>
                        <a href="/index.html">
                            <i class="fas fa-home"></i>
                            <span class="nav-text">Início</span>
                        </a>
                    </li>
                    <li>
                        <a href="/catalogo/catalogo.html">
                            <i class="fas fa-bars"></i>
                            <span class="nav-text">Catálogo</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </header>
    <nav>
        <img id="logo" src="/img/hokkaido-logo.png" alt="Logo"/>
        <div class="navigation-icons">
            <a id="previous-chapter" href=""><i class="fas fa-backward"></i></a>
            <a href="/hokkaido/selecionar.html" id="select-volume"><i class="fas fa-bars"></i></a>
            <a id="next-chapter" href=""><i class="fas fa-forward"></i></a>
        </div>
    </nav>
    <section>
        <div class="capitulo"></div>        
    </section>
    

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Localize o elemento div.capitulo
    var capituloDiv = document.querySelector('.capitulo');

    // Verifique se o elemento foi encontrado
    if (capituloDiv) {
        // Especifica o intervalo de imagens (de '1' a '17', por exemplo)
        var intervaloImagens = { inicio: 1, fim: 17 };

        for (var i = intervaloImagens.inicio; i <= intervaloImagens.fim; i++) {
            // Formata o número da imagem (adiciona zero à esquerda se necessário)
            var numeroImagem = padLeft(i, 2);
            
            // Crie um novo elemento img
            var novaImg = document.createElement('img');

            // Defina o atributo src para o caminho da imagem
            novaImg.src = "/hokkaido_capitulos/Capitulo_15/" + numeroImagem + ".jpg";

            // Adicione a nova imagem ao elemento div.capitulo
            capituloDiv.appendChild(novaImg);
        }
    } else {
        console.error("Div '.capitulo' não encontrada.");
    }

    // Atualizar a navegação original
    atualizarNavigationOriginal();

    // Adicionar a navegação inferior
    adicionarBottomNavigation();
});

// Função para preencher com zeros à esquerda até atingir o tamanho especificado
function padLeft(numero, tamanho) {
    var numeroString = numero.toString();
    while (numeroString.length < tamanho) {
        numeroString = '0' + numeroString;
    }
    return numeroString;
}

// Função para atualizar a navegação original
function atualizarNavigationOriginal() {
    // Obter o número do capítulo atual da URL
    var numeroCapituloAtual = obterNumeroCapituloAtual();

    // Obter os links para o capítulo anterior e próximo
    var linkCapituloAnterior = obterLinkCapitulo(numeroCapituloAtual - 1);
    var linkCapituloProximo = obterLinkCapitulo(numeroCapituloAtual + 1);

    // Atualizar os links de navegação no HTML
    document.getElementById("previous-chapter").href = linkCapituloAnterior;
    document.getElementById("next-chapter").href = linkCapituloProximo;
}

// Função para obter o link do capítulo anterior ou próximo
function obterLinkCapitulo(numeroCapitulo) {
    var diretorioAtual = obterDiretorioAtual();
    if (numeroCapitulo >= 1 && diretorioAtual !== null) {
        return diretorioAtual.replace(/Capitulo_\d+/, "Capitulo_" + numeroCapitulo) + "/ler.html";
    }
    return null;
}

// Função para obter o diretório atual
function obterDiretorioAtual() {
    var url = window.location.pathname;
    var partes = url.split('/');
    // Remove a última parte (o nome do arquivo atual)
    partes.pop();
    return partes.join('/');
}

// Função para obter o número do capítulo atual da URL
function obterNumeroCapituloAtual() {
    var url = window.location.href;
    var numeroCapitulo = url.match(/Capitulo_(\d+)/);
    if (numeroCapitulo && numeroCapitulo.length > 1) {
        return parseInt(numeroCapitulo[1]);
    } else {
        console.error('Número do capítulo não encontrado na URL.');
        return null;
    }
}

// Função para adicionar a navegação inferior
function adicionarBottomNavigation() {
    // Encontra a seção
    var section = document.querySelector('section');

    // Verifica se a seção foi encontrada
    if (section) {
        // Cria a navegação inferior
        var bottomNavigation = document.createElement('nav');
        bottomNavigation.classList.add('bottom-navigation');

        // Cria a div de ícones de navegação
        var navigationIconsDiv = document.createElement('div');
        navigationIconsDiv.classList.add('navigation-icons');
        navigationIconsDiv.id = 'nav_ico-baixo';

        // Cria os links de navegação para o capítulo anterior e próximo
        var linkCapituloAnterior = document.createElement('a');
        var linkCapituloProximo = document.createElement('a');
        var linkSelecionarVolume = document.createElement('a');

        // Atualiza os hrefs dos links de navegação com os links dos capítulos
        linkCapituloAnterior.href = obterLinkCapitulo(obterNumeroCapituloAtual() - 1);
        linkCapituloProximo.href = obterLinkCapitulo(obterNumeroCapituloAtual() + 1);
        linkSelecionarVolume.href = "/hokkaido/selecionar.html";

        // Adiciona os ícones de navegação aos links
        linkCapituloAnterior.innerHTML = '<i class="fas fa-backward"></i>';
        linkCapituloProximo.innerHTML = '<i class="fas fa-forward"></i>';
        linkSelecionarVolume.innerHTML = '<i class="fas fa-bars"></i>';

        // Adiciona os links de navegação à div de ícones de navegação
        navigationIconsDiv.appendChild(linkCapituloAnterior);
        navigationIconsDiv.appendChild(linkSelecionarVolume);
        navigationIconsDiv.appendChild(linkCapituloProximo);

        // Adiciona a div de ícones de navegação à navegação inferior
        bottomNavigation.appendChild(navigationIconsDiv);

        // Insere a navegação inferior após a seção
        section.parentNode.insertBefore(bottomNavigation, section.nextSibling);
    } else {
        console.error('Seção não encontrada no documento.');
    }
}

// Função para definir e atualizar o conteúdo do "Continue Lendo"
function atualizarContinueLendo(capa, nomeManga, capitulo) {
    var continuarLendo = {
        capa: capa,
        nomeManga: nomeManga,
        capitulo: capitulo
    };

    // Salvar o estado do capítulo no localStorage
    localStorage.setItem('continueLendo', JSON.stringify(continuarLendo));

    // Verificar se o elemento .continuar-lendo existe na página
    var continuarLendoDiv = document.querySelector('.continuar-lendo');
    if (continuarLendoDiv) {
        // Atualizar a exibição do "Continue Lendo" apenas se o elemento existir
        continuarLendoDiv.querySelector('.capa-miniatura').innerHTML = '<img src="' + capa + '" alt="Capa">';
        continuarLendoDiv.querySelector('.nome-manga').textContent = nomeManga;
        continuarLendoDiv.querySelector('.capitulo_manga').textContent = "Capítulo " + capitulo;
    } else {
        console.log("Foda");
    }
}
    </script>

    <script src="/favicons.js"></script> 
    <script src="/caso_icones.js"></script>
</body>
</html>