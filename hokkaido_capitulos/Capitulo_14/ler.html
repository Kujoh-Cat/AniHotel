<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#181818">
    <link rel="stylesheet" href="/header_vol.css">
    <link rel="stylesheet" href="/hokkaido_capitulos/cap.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="/retornar_pagina.js"></script>
    <title>AniHotel+</title>
    <style>
        body {
            background: #181818;
        }
        
        nav {
            text-align: center;
            margin-top: 20px;
        }
        
        nav .navigation-icons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 10px;
        }
        
        nav .navigation-icons a {
            color: white;
            font-size: 24px;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="logo">    
                <i class="fas fa-book-open logo-icon"></i>
                <h1>AniHotel+</h1>
            </div>
            <nav>
                <ul>
                    <li>
                        <a href="/index.html">
                            <i class="fas fa-home"></i>
                            <span class="nav-text">Início</span>
                        </a>
                    </li>
                    <li>
                        <a href="/catalogo/catalogo.html">
                            <i class="fas fa-bars"></i>
                            <span class="nav-text">Catálogo</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </header>
    <nav>
        <img id="logo" src="/img/hokkaido-logo.png" alt="Logo"/>
        <div class="navigation-icons">
            <a id="previous-chapter" href=""><i class="fas fa-backward"></i></a>
            <a href="/hokkaido/selecionar.html" id="select-volume"><i class="fas fa-bars"></i></a>
            <a id="next-chapter" href=""><i class="fas fa-forward"></i></a>
        </div>
    </nav>
    <section>
        <div class="capitulo"></div>        
    </section>
    

<script>

// Atualizar o "Continue Lendo" com o número do capítulo atual
var numeroCapituloAtual = obterNumeroCapituloAtual();
if (numeroCapituloAtual !== null) {
    atualizarContinueLendo("/hokkaido/capas/volume_2.png", "Hokkaido Gals", numeroCapituloAtual);
} else {
    console.error("Número do capítulo atual não encontrado na URL.");
}

document.addEventListener('DOMContentLoaded', function() {
    // Verifica se a navegação inferior já existe no documento
    var bottomNavigationExists = document.querySelector('.bottom-navigation');

    // Se a navegação inferior não existir, adiciona manualmente abaixo da seção
    if (!bottomNavigationExists) {
        adicionarBottomNavigation();
    }

    // Atualiza a navegação original
    atualizarNavigationOriginal();
});

// Função para adicionar a navegação inferior
function adicionarBottomNavigation() {
    // Encontra a seção
    var section = document.querySelector('section');

    // Verifica se a seção foi encontrada
    if (section) {
        // Cria a navegação inferior
        var bottomNavigation = document.createElement('nav');
        bottomNavigation.classList.add('bottom-navigation');

        // Cria a div de ícones de navegação
        var navigationIconsDiv = document.createElement('div');
        navigationIconsDiv.classList.add('navigation-icons');
        navigationIconsDiv.id = 'nav_ico-baixo';

        // Cria os links de navegação para o capítulo anterior e próximo
        var linkCapituloAnterior = document.createElement('a');
        var linkCapituloProximo = document.createElement('a');
        var linkSelecionarVolume = document.createElement('a');

        // Atualiza os hrefs dos links de navegação com os links dos capítulos
        linkCapituloAnterior.href = obterLinkCapituloAnterior();
        linkCapituloProximo.href = obterLinkCapituloProximo();
        linkSelecionarVolume.href = "/hokkaido/selecionar.html";

        // Adiciona os ícones de navegação aos links
        linkCapituloAnterior.innerHTML = '<i class="fas fa-backward"></i>';
        linkCapituloProximo.innerHTML = '<i class="fas fa-forward"></i>';
        linkSelecionarVolume.innerHTML = '<i class="fas fa-bars"></i>';

        // Adiciona os links de navegação à div de ícones de navegação
        navigationIconsDiv.appendChild(linkCapituloAnterior);
        navigationIconsDiv.appendChild(linkSelecionarVolume);
        navigationIconsDiv.appendChild(linkCapituloProximo);

        // Adiciona a div de ícones de navegação à navegação inferior
        bottomNavigation.appendChild(navigationIconsDiv);

        // Insere a navegação inferior após a seção
        section.parentNode.insertBefore(bottomNavigation, section.nextSibling);
    } else {
        console.error('Seção não encontrada no documento.');
    }
}

// Função para atualizar a navegação original
function atualizarNavigationOriginal() {
    // Obter o número do capítulo atual da URL
    var numeroCapituloAtual = obterNumeroCapituloAtual();

    // Criar os links para o capítulo anterior e próximo
    var linkCapituloAnterior = "/hokkaido_capitulos/Capitulo_" + (numeroCapituloAtual - 1) + "/ler.html";
    var linkCapituloProximo = "/hokkaido_capitulos/Capitulo_" + (numeroCapituloAtual + 1) + "/ler.html";

    // Atualizar os links de navegação no HTML
    document.getElementById("previous-chapter").href = linkCapituloAnterior;
    document.getElementById("next-chapter").href = linkCapituloProximo;
}

// Função para obter o link do capítulo anterior
function obterLinkCapituloAnterior() {
    var numeroCapituloAtual = obterNumeroCapituloAtual();
    if (numeroCapituloAtual !== null && numeroCapituloAtual > 1) {
        return "/hokkaido_capitulos/Capitulo_" + (numeroCapituloAtual - 1) + "/ler.html";
    }
    return null;
}

// Função para obter o link do próximo capítulo
function obterLinkCapituloProximo() {
    var numeroCapituloAtual = obterNumeroCapituloAtual();
    if (numeroCapituloAtual !== null) {
        return "/hokkaido_capitulos/Capitulo_" + (numeroCapituloAtual + 1) + "/ler.html";
    }
    return null;
}

// Função para obter o número do capítulo atual da URL
function obterNumeroCapituloAtual() {
    var url = window.location.href;
    var numeroCapitulo = url.match(/Capitulo_(\d+)/);
    if (numeroCapitulo && numeroCapitulo.length > 1) {
        return parseInt(numeroCapitulo[1]);
    } else {
        console.error('Número do capítulo não encontrado na URL.');
        return null;
    }
}

   // Função para definir e atualizar o conteúdo do "Continue Lendo"
function atualizarContinueLendo(capa, nomeManga, capitulo) {
    var continuarLendo = {
        capa: capa,
        nomeManga: nomeManga,
        capitulo: capitulo
    };

    // Salvar o estado do capítulo no localStorage
    localStorage.setItem('continueLendo', JSON.stringify(continuarLendo));

    // Verificar se o elemento .continuar-lendo existe na página
    var continuarLendoDiv = document.querySelector('.continuar-lendo');
    if (continuarLendoDiv) {
        // Atualizar a exibição do "Continue Lendo" apenas se o elemento existir
        continuarLendoDiv.querySelector('.capa-miniatura').innerHTML = '<img src="' + capa + '" alt="Capa">';
        continuarLendoDiv.querySelector('.nome-manga').textContent = nomeManga;
        continuarLendoDiv.querySelector('.capitulo_manga').textContent = "Capítulo " + capitulo;
    } else {
        console.log("Foda");
    }
}

        document.addEventListener('DOMContentLoaded', function() {
    // Localize o elemento div.capitulo
    var capituloDiv = document.querySelector('.capitulo');

// Verifique se o elemento foi encontrado
if (capituloDiv) {
    // Caminho do diretório atual
    var diretorioAtual = window.location.pathname.substring(0, window.location.pathname.lastIndexOf("/"));
    
    // Faz uma solicitação HTTP para o diretório atual
    fetch(diretorioAtual)
        .then(response => response.text())
        .then(html => {
            // Crie um novo parser de HTML
            var parser = new DOMParser();
            var doc = parser.parseFromString(html, "text/html");
            // Selecione todos os elementos <a> (links) no documento
            var links = doc.querySelectorAll("a");
            // Filtrar apenas os links que apontam para arquivos
            var arquivos = Array.from(links)
                .filter(link => link.href.lastIndexOf("/") !== link.href.length - 1) // Ignora diretórios
                .map(link => link.href);
            
            // Filtrar apenas os arquivos de imagem (jpg, png, etc)
            var imagens = arquivos.filter(arquivo => {
                var extensao = arquivo.substring(arquivo.lastIndexOf(".") + 1).toLowerCase();
                return ['jpg', 'jpeg', 'png', 'gif', 'bmp', 'svg'].includes(extensao);
            });

            // Ordenar as imagens
            imagens.sort(function(a, b) {
                var nomeA = extrairNumeroDoNomeArquivo(a);
                var nomeB = extrairNumeroDoNomeArquivo(b);
                return nomeA - nomeB;
            });

            // Iterar sobre as imagens ordenadas
            imagens.forEach(function(nomeImagem) {
                // Crie um novo elemento img
                var novaImg = document.createElement('img');
                // Defina o atributo src para o caminho da imagem
                novaImg.src = nomeImagem;
                // Adicione a nova imagem ao elemento div.capitulo
                capituloDiv.appendChild(novaImg);
            });
        })
        .catch(error => {
            console.error("Erro ao buscar imagens:", error);
        });
} else {
    console.error("Div '.capitulo' não encontrada.");
}

// Função para extrair o número do nome do arquivo
function extrairNumeroDoNomeArquivo(nomeArquivo) {
    var nome = nomeArquivo.substring(nomeArquivo.lastIndexOf("/") + 1);
    var numero = nome.match(/\d+/); // Encontra o primeiro número no nome do arquivo
    return parseInt(numero);
}
        });
    </script>

    <script src="/favicons.js"></script> 
    <script src="/caso_icones.js"></script>
</body>
</html>